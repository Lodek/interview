{% extends "base/base.html" %}

{% block content %}

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  let area_results = {{area_results | safe}}
  let subarea_results = {{subarea_results | safe}}
  let band_results = {{band_results | safe}}


  google.charts.load('current', {'packages':['corechart', 'table']});
  google.charts.setOnLoadCallback(drawBand);
  google.charts.setOnLoadCallback(drawArea);
  google.charts.setOnLoadCallback(drawSubarea);
  function drawBand() {
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Band');
      data.addColumn('number', 'Score');
      data.addRows(band_results)

      var options = {
          width: 400,
          height: 240,
          title: 'Band average',
      };

      var chart = new google.visualization.ColumnChart(document.getElementById('band_chart'));
      chart.draw(data, options);

      var table = new google.visualization.Table(document.getElementById('band_table'));
      table.draw(data);
  }

  function drawArea() {
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Area');
      data.addColumn('number', 'Score');
      data.addRows(area_results)

      var options = {
          width: 400,
          height: 240,
          title: 'Area average',
      };

      var chart = new google.visualization.ColumnChart(document.getElementById('area_chart'));
      chart.draw(data, options);


      var table = new google.visualization.Table(document.getElementById('area_table'));
      table.draw(data);
  }

  function drawSubarea() {
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Subarea');
      data.addColumn('number', 'Score');
      data.addRows(subarea_results)

      var options = {
          width: 400,
          height: 240,
          title: 'Subarea average',
      };

      var chart = new google.visualization.ColumnChart(document.getElementById('subarea_chart'));
      chart.draw(data, options);
      var table = new google.visualization.Table(document.getElementById('subarea_table'));
      table.draw(data);
  }

</script>

<style>
  .result {
      display: flex;
      flex-direction: row;
      align-items: center;

  }
</style>

<h1>Interview Detail</h1>

{{interview.candidate.name}}
{{interview.position.name}}
{{interview.comments}}
{{interview.result}}

<h2>Area results</h2>
<div class="result">
<div id="area_chart"></div>
<div id="area_table"></div>
</div>

<h2>Subarea results</h2>
<div class="result">
<div id="subarea_chart"></div>
<div id="subarea_table"></div>
</div>

<h2>Band results</h2>
<div class="result">
<div id="band_chart"></div>
<div id="band_table"></div>
</div>
{% endblock %}
